# values.yaml
environment: "dev"

external_lb:
  enable: false

router:
  app_name: "router-controller"
  divyamRouterConfigPath: "/etc/divyam_router/configs/router-config.yaml"

  # The container listens on this port (this value is used as the ROUTER_PORT)
  containerPort: 8000
  otelEndpoint: "grpc://otel-collector-dev-svc.otel-collector-dev-ns.svc.cluster.local:4617"
  otel_timeout_secs: 1
  selectorEndpoint: "http://route-selector-dev-svc.route-selector-dev-ns.svc.cluster.local"
  corsAllowOrigins: "http://127.0.0.1:8888,http://localhost:8888,http://divyam-dashboard:8888"
  forwardedAllowIps: 35.244.238.149
  mock_selector: false
  mock_model: false
  uvicornLogLevel: "info"
  dbHost: "mysql-dev-svc.mysql-dev-ns.svc.cluster.local"
  dbPort: 3306
  dbDatabase: "divyam_dev"

  #NFR configurations
  concurrency: 60
  workerCount: 4
  backlog: 100
  replicaCount: 3
  resources:
    cpu: "4"
    memory: "8Gi"
  serviceAccountName: "router-controller-dev-sa"

  # Cache configurations
  modelProviderCacheMaxsize: 100
  modelProviderCacheTtl: 300  # 5 minutes in seconds
  apiKeysCacheMaxsize: 100
  apiKeysCacheTtl: 300  # 5 minutes in seconds

  # Circuit breaker settings (dev - more lenient)
  CircuitBreakerRequestThreshold: 8
  CircuitBreakerFailureThresholdPct: 60
  CircuitBreakerDuration: 3

  # Retry settings for models (dev - faster retries for development)
  modelRetryDelay: 1
  modelRetryDelayMultiplier: 2
  modelMaxRetries: 5
  modelMaxLatency: 0

  # Fallback settings for models (dev - enabled for testing)
  modelFallbackEnabled: true
  modelMaxFallbackHops: 3


hpa:
  enabled: false
